<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<title>ğŸŒ˜ - to the moon! AES & Blowfish Encryption Online</title>
	
	<link rel="icon" type="image/x-icon" href="icon/favicon.ico">
	<link rel="apple-touch-icon" href="/icon/apple-touch-icon.png">

	<link rel="manifest" href="manifest.webmanifest">

	<meta name="description" content="Encrypt and decrypt text with a key or a password. The output is converted into Emoji. The key can be a emoji too." />
	<meta name="keywords" content="Encrypt,Decrypt,AES,Blowfish,AES256,Encryption,Online,HTML,Javascript,Offline,Download,Sourcecode,Emoji,Emo" />
	<meta name="author" content="Marques Xiaomi" />
	<meta name="copyright" content="Maxim Schulz" />
	<meta name="page-topic" content="Computer" />
	<meta http-equiv="Reply-to" content="maxim@omg.lol" />
	<meta name="expires" content="" />
	<meta name="revisit-after" content="2 days" />

	<script src="js/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/bootstrap.bundle.js"></script>
	<script src="js/crypto.js"></script>
</head>

<body class="d-block p-3">
	<form class="form">
		<div class="text-center"><h3>Text ğŸ“„ ğŸ”„ ğŸŒˆ Emoji</h3></div>
		<div class="text-center"><h6 id="explanation">Encrypt or decrypt texts or messages with a password. The output can be converted back again only with the right password. For very long texts, hex or base64 encryption is recommended.</h6></div>
		<hr>
		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<span class="input-group-text">âœ‰ï¸</span>
			</div>
			<textarea class="form-control" placeholder="Message" aria-label="Emoji" id="inputText" rows="5"></textarea>
			<div class="input-group-append">
				<button id="deleteText" type="button" class="btn btn-primary btn-block bg-dark">Delete <br> Message</button>
			</div>
		</div>
		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<span class="input-group-text" id="emcode">ğŸ”‘</span>
			</div>
			<input type="text" placeholder="(optional)" class="form-control" id="inputKey" aria-describedby="emcode">
			<div class="input-group-append">
				<button id="btnKeyGenerate" type="button" class="btn btn-primary btn-block bg-dark">ğŸ”„</button>
			</div>
			<div class="input-group-append">
				<button id="copyKey" type="button" class="btn btn-primary bg-dark btn-block">Copy</button>
			</div>
		</div>
		<hr>
		<div id="saveKey" class="mb-2">
			Load or save keys 
		</div>
		<div class="row">
			<div class="col">
				<div class="form-group">
					<select class="form-control" id="keySlot">
					  <option value="1">Slot 1ï¸âƒ£</option>
					  <option value="2">Slot 2ï¸âƒ£</option>
					  <option value="3">Slot 3ï¸âƒ£</option>
					  <option value="4">Slot 4ï¸âƒ£</option>
					  <option value="5">Slot 5ï¸âƒ£</option>
					</select>
				  </div>
			</div>
			<div class="col">
				<button id="btnLoad" type="button" class="btn btn-primary bg-dark btn-block mb-2">ğŸ“² Load</button>				
				<button id="btnSave" type="button" class="btn btn-primary bg-dark btn-block mb-2">ğŸ’¾ Save</button>
			</div>
		</div>
		<hr>
		<div class="row">
			<div class="col">
				<div class="form-check">
					<input type="checkbox" class="form-check-input" id="checkEmoji" checked>
					<label class="form-check-label" for="checkEmoji">Output: <b>Emojis</b></label>
				  </div>
			</div>
			<div class="col">
				<div class="form-check">
					<input type="checkbox" class="form-check-input" id="checkHex">
					<label class="form-check-label" for="checkHex">Output: <b>Hexadecimal</b></label>
				  </div>
			</div>
			<div class="col">
				<div class="form-check">
					<input type="checkbox" class="form-check-input" id="checkB64">
					<label class="form-check-label" for="checkB64">Output: <b>Base64</b></label>
				  </div>
			</div>
		</div>
		<hr>
		<button id="btnConvert" type="button" class="btn btn-primary bg-dark btn-block mb-2">ğŸ”€ Encrypt / Decrypt</button>
		</form>
	<hr>
	<div class="input-group mb-3">
		<textarea class="form-control" aria-label="Emoji" id="out" rows="10" readonly>Copy from here</textarea>
		<div class="input-group-append">
			<button id="copyMessage" type="button" class="btn btn-primary btn-block bg-dark">Copy <br>to clipboard</button>
		</div>
	</div>
	<hr>
	<p class="text-center">
		<b id="footerHigh">Secure on device text encryption! 
			<br>
			No data sent. No cookies. No tracking. No logging.
			<br>
			Anti Bruteforce/Quantum/ASIC 
			<br>
			<br>Change language</b>
	</p>
	<div class="form-group text-center">
		<select class="form-control" id="lang">
			<option value="0">English ğŸ‡ºğŸ‡¸</option>
			<option value="1">German ğŸ‡©ğŸ‡ª</option>
		</select>
	</div>

	<div class="text-center">
		<a href="https://github.com/mqxym/EmojiCrypt" id="footerSource">Sourcecode (Github)</a>
	</div>


	<!-- 
		Todo:
		- copy button for URL
		- save language in local storage
		- languages (ger, span, port, rus, japan etc)
	-->

	<script src="js/lib.js"></script>
	<script src="js/emo.js"></script>
	<script src="js/lang.js"></script>

	<script>
		let lang = 0;
		if (localStorage.getItem("lang")) {
			lang = parseInt(localStorage.getItem("lang"));
		} 

		let mode = "emoji";

		function setLanguage () {
			$("#deleteText").html(getTranslation("deleteText", lang));
			$("#footerHigh").html(getTranslation("footerHigh", lang));
			$("#footerSource").html(getTranslation("footerSource", lang));
			$("#explanation").html(getTranslation("explanation", lang));
			$("#inputText").attr("placeholder",getTranslation("inputText", lang));
			$("#inputKey").attr("placeholder",getTranslation("inputKey", lang));
			$("#btnConvert").html(getTranslation("btnConvert", lang));

			$("#copyKey").html(getTranslation("copyKey",lang));
			$("#out").html(getTranslation("out",lang));
			$("#saveKey").html(getTranslation("saveKey",lang));
			$("#btnLoad").html(getTranslation("btnLoad",lang));
			$("#btnSave").html(getTranslation("btnSave",lang));
			$("#copyMessage").html(getTranslation("copyMessage",lang));
			
		}

		function test () {
			if (false) {
				$("#inputText").val("ğŸ˜’â€‹ğŸ¤®â€‹ğŸ“â€‹ğŸ â€‹ğŸ¥ â€‹ğŸ¥¬â€‹ğŸ³â€‹ğŸ¤”â€‹ğŸ˜±â€‹ğŸšâ€‹ğŸ¤˜â€‹ğŸ˜ â€‹ğŸ˜â€‹ğŸŸâ€‹ğŸ¤™â€‹ğŸ†â€‹ğŸ–â€‹ğŸ™‚â€‹ğŸ¤§â€‹ğŸ˜·â€‹ğŸœâ€‹ğŸ–•â€‹ğŸ˜¹â€‹ğŸ§â€‹ğŸ˜‰â€‹ğŸ«â€‹ğŸ¥­â€‹ğŸ§„â€‹ğŸ‘£â€‹ğŸ˜¥â€‹ğŸ¥™â€‹ğŸ˜•â€‹ğŸ¥â€‹ğŸâ€‹ğŸ˜»â€‹ğŸ¦µâ€‹ğŸŒ½â€‹ğŸ•â€‹ğŸ’‹â€‹âœ‹â€‹ğŸ‘ºâ€‹ğŸ¥‘â€‹ğŸ‘¹â€‹ğŸ˜€â€‹âœŠâ€‹ğŸ’‹â€‹ğŸ¤”â€‹ğŸ¥–â€‹ğŸ‘£â€‹âœŠâ€‹ğŸŒ­â€‹ğŸ¤™â€‹ğŸ¥â€‹ğŸ¡â€‹ğŸ¥´â€‹ğŸ£â€‹");
				$("#inputKey").val("ğŸ˜…ğŸ¦ªğŸ§‡ğŸ…ğŸ˜¯ğŸ˜¶ğŸ‘¾ğŸ˜ˆğŸ¤œğŸ‚ğŸ«ğŸ˜½ğŸ—âœï¸ğŸ˜µğŸ‘¾ğŸ¥šğŸœğŸ’ğŸ˜¬ğŸ¥ ğŸ˜“ğŸ˜»ğŸ¥¥ğŸ‘£ğŸ¥©ğŸ¤¯ğŸ¥´ğŸŸğŸ˜‚ğŸ¤ğŸ˜´ğŸ¤ ğŸ«“ğŸ˜¾ğŸğŸ¥ºğŸ˜°â˜ ï¸ğŸ’ªğŸ¤¬âœ‹ğŸ¥´ğŸ¤¤ğŸ˜„ğŸ¤­ğŸƒğŸ¤ğŸ¥­ğŸ˜ğŸ˜¤ğŸ§â˜ºï¸ğŸ¤³ğŸ¥”ğŸ’©ğŸğŸŸâ˜ºï¸ğŸ¤²ğŸ¤¤ğŸğŸ‘‹ğŸ˜ğŸŒ½ğŸ«ğŸ¤²ğŸ«â˜¹ï¸ğŸ¥¨ğŸ˜—ğŸ‘‚ğŸ¥ªğŸğŸŒ½ğŸ¤ ğŸ˜£ğŸ…ğŸ’€ğŸœğŸ¤–ğŸ¥©ğŸ¤–ğŸ¤–ğŸ˜‘ğŸ§„ğŸ‰ğŸ˜ºğŸ¥šğŸ˜´ğŸ¤ğŸ˜¥ğŸ¥’ğŸ˜ğŸ¤«ğŸ˜¹ğŸ¤¯ğŸ‘ƒğŸğŸ™ŒğŸ±ğŸ˜¸ğŸ¤¥ğŸ¥•ğŸŠğŸ‘ğŸ¥ºğŸ¤˜ğŸ‘ƒğŸ¥´ğŸ‘‰ğŸ¤ŒğŸ¦»ğŸ¤¯ğŸ˜ŒğŸ‘»ğŸ˜•ğŸ¤™ğŸ˜ºğŸ˜¢ğŸ™‚ğŸ«ğŸ¤•ğŸ‘ğŸ¥­ğŸƒğŸ¥ ğŸ˜¯ğŸ˜‡ğŸ«“ğŸ¤¢ğŸ¤ªğŸŒ®ğŸ–ğŸ˜¹ğŸ‘ˆğŸ‘ğŸ˜œğŸ˜½ğŸ¤¬ğŸ¤ ğŸ¤¨ğŸ˜¹ğŸ˜¶ğŸ˜“ğŸ¡ğŸ‘¿ğŸ¤•ğŸ˜ğŸ‘ºğŸ¤ğŸ§ğŸ¦¿ğŸ†ğŸ¥§ğŸ˜ğŸ¦¶ğŸ™ŒğŸ‘ºğŸ¤");				
			}
		}

		$(document).ready(function () {

			setLanguage();

			$("#btnConvert").click(async function () {

				if ($("#checkEmoji").is(':checked')) {
					mode = "emoji";
					console.log("Mode is: Emoji")
				} else if ($("#checkHex").is(':checked')) {
					mode = "hex";
					console.log("Mode is: Hexadecimal")
				} else if ($("#checkB64").is(':checked')) {
					mode = "b64";
					console.log("Mode is: Base64");
				}

				if (!checkInputString($("#inputText").val())) {
					$(this).html(getTranslation("btnEncodeWorking",lang));
					await new Promise(r => setTimeout(r, 15));

					let message = $("#inputText").val();
					let key = getPassword($("#inputKey").val());

					let emojiString = encrypt(message,key, mode);

					if (!emojiString) {
						$(this).html(getTranslation("btnEncodeFailed",lang));
					} else {
						$("#out").val(emojiString);
						$(this).html(getTranslation("btnEncodeSuccess",lang));
					}
					await new Promise(r => setTimeout(r, 5000));
					$(this).html(getTranslation("btnConvert",lang));

				} else {
					$(this).html(getTranslation("btnDecodeWorking",lang));

					await new Promise(r => setTimeout(r, 15));
					
					let message = $("#inputText").val();
					let key = getPassword($("#inputKey").val());
					
					decrypted = decrypt(message,key,mode);

					if (!decrypted) {
						$(this).html(getTranslation("btnDecodeFailed",lang));
					} else {
						$(this).html(getTranslation("btnDecodeSuccess",lang));
					}

					$("#out").val(decrypted);

					await new Promise(r => setTimeout(r, 5000));
					$(this).html(getTranslation("btnConvert",lang));
				}
			});

			$("#deleteText").click(function () {
				$("#inputText").val("");
			});

			$("#btnKeyGenerate").click(function () {
				$("#inputKey").val(generateRandomEmo());
			});

			$("#copyKey").click(function () {
				let copyText = document.getElementById("inputKey");
				copyText.select();
				copyText.setSelectionRange(0, 99999);
				document.execCommand("copy");
			});

			$("#copyMessage").click(function () {
				let copyText = document.getElementById("out");
				copyText.select();
				copyText.setSelectionRange(0, 99999);
				document.execCommand("copy");
			});

			$("#btnLoad").click(async function () {
				let slot = $("#keySlot").val();
				console.log(slot);
				$(this).html(getTranslation("loadKey",lang));
				$(this).removeClass("bg-dark");
				$(this).addClass("bg-success");

				//let key = getCookie("key"+slot);
				key = localStorage.getItem("key" + slot);
				$("#inputKey").val(key);
				
				await new Promise(r => setTimeout(r, 1000));
				$(this).removeClass("bg-success");
				$(this).addClass("bg-dark");
				$(this).html(getTranslation("btnLoad",lang));
			});

			$("#btnSave").click(async function () {
				let slot = $("#keySlot").val();
				console.log(slot);
				$(this).html(getTranslation("saved",lang));
				$(this).removeClass("bg-dark");
				$(this).addClass("bg-success");

				//setCookie("key"+slot,$("#inputKey").val(),777);

				localStorage.setItem("key"+slot,$("#inputKey").val());
				await new Promise(r => setTimeout(r, 1000));
				$(this).removeClass("bg-success");
				$(this).addClass("bg-dark");
				$(this).html(getTranslation("btnSave",lang));
			});

			$("#lang").change(function() {
				localStorage.setItem("lang", parseInt($("#lang").val()));
				lang = parseInt($("#lang").val());
				setLanguage();
			});

		});
	</script>
</body>

</html>