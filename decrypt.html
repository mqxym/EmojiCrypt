<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<title>ğŸš€ - to the moon!</title>
</head>

<body class="d-block p-3">
	<ul class="nav nav-pills nav-fill">
		<li class="nav-item">
			<a class="nav-link" id="headerEncrypt" href="encrypt.html">Encrypt ğŸ“¤</a>
		</li>
		<li class="nav-item">
			<a class="nav-link active bg-dark" id="headerDecrypt" href="decrypt.html">Decrypt ğŸ“¥</a>
		</li>
	</ul>
	<hr>
	<form class="form">
		Emoji ğŸŒˆ â¡ï¸ ğŸ“„ Text
		<hr>
		<div class="input-group">
			<div class="input-group-prepend">
				<span class="input-group-text">âœ‰ï¸</span>
			</div>
			<textarea class="form-control" placeholder="Paste message" aria-label="Emoji" id="inputText"
				rows="5"></textarea>
		</div>
		<label for="emcode">
			<div class="text-center" id="decryptExplanation">Decrypt messages with an optional password</div>
		</label>
		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<span class="input-group-text" id="emcode">ğŸ”‘</span>
			</div>
			<input type="text" placeholder="(optional)" class="form-control" id="inputKey" aria-describedby="emcode">
		</div>
		<button id="btnDecode" type="button" class="btn btn-primary bg-dark btn-block mb-2">ğŸ”€ Decrypt</button>
	</form>
	<hr>
	<div class="input-group mb-3">
		<textarea class="form-control" aria-label="Emoji" id="messageOut" rows="10" readonly>Your message</textarea>
	</div>
	<hr>
	<p class="text-center">
		<b id="footerHigh">Secure on device text encryption!</b>
	</p>
	<div class="text-center">
		<a href="https://github.com/mqxym/EmojiCrypt" id="footerSource">Sourcecode (Github)</a>
	</div>





	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="js/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/lib.js"></script>
	<script src="js/emo.js"></script>
	<script src="js/crypto.js"></script>
	<script src="js/lang.js"></script>
	
	<script>
		const lang = 1;

		function setLanguage () {
			$("#footerHigh").html(getFooterHigh(lang));
			$("#footerSource").html(getFooterSource(lang));
			$("#headerEncrypt").html(getHeaderEncrypt(lang));
			$("#headerDecrypt").html(getHeaderDecrypt(lang));

			
			$("#decryptExplanation").html(getDecryptExplanation(lang));
			$("#btnDecode").html(getBtnDecode(lang));
			
		}

		$(document).ready(function () {

			setLanguage();
			console.log("Language Packet Loaded.");

			emo_array = stringToArray(emo);
			emo_array = cleanArray(emo_array);

			if (isDebug()) {
				$("#inputText").val("ğŸŒšğŸšğŸ”ªğŸ’–ğŸ¤•ğŸ›ğŸ“§ğŸ³âœ¨ğŸ…ğŸ†ğŸ’¼ğŸ ğŸ¥œâœˆâ†ªğŸ­ğŸ®ğŸš§ğŸ”¸ğŸ¦“ğŸš›â˜â†”ğŸ˜¿ğŸ‡ğŸ—ºğŸš»ğŸ¦—ğŸ»ğŸ›©ğŸ‘™ğŸ§ğŸ™â›ã€½ğŸ¦ŒğŸ¾ğŸ—â—ğŸ¦•ğŸ±ğŸ““ğŸ…¾ğŸ˜¢ğŸ³ğŸ¦¯â™»ğŸ£ğŸ§†ğŸœâ”ğŸ˜—ğŸ‡ğŸšŠâ™¿");
				$("#inputKey").val("ğŸˆğŸ¥ƒğŸ“ºğŸŒ¹ğŸˆšğŸ§„ğŸ¿ğŸªğŸ¥ŠğŸ™ŠğŸ•â›¹ğŸ˜œğŸ›•â±ğŸŒœğŸ”´ğŸšœğŸ“²ğŸµğŸ«ğŸŒ¼ğŸ”·ğŸ“ğŸ¡ğŸ©ğŸ‰ğŸš‹ğŸ“ŒğŸ‘ºğŸ•ğŸ¸ğŸ«ğŸºğŸŒ‡ğŸ¦‚ğŸ…±ğŸ¤¸ğŸ¥œğŸ•ŒğŸ“˜ğŸ¦ƒğŸ„ğŸ›«ğŸ‡ğŸ¥œğŸ‘œğŸ‹ã€°ğŸ§ğŸŒğŸ ğŸ¤—ğŸ¥ğŸ¥™ğŸŒ•â†ªâœ”ğŸ˜ğŸ™ƒğŸ–ŒğŸŒ½ğŸ§¬ğŸŠğŸ¦ˆğŸ®ğŸ˜–ğŸ˜¨ğŸŒ¥ğŸš§ğŸŒ¼â™€ğŸ•ğŸ“¹ğŸŒ±ğŸ¥—ğŸ’šğŸ¥’ğŸ¦†ğŸ˜¸ğŸª“ğŸˆâ›ªğŸ¯ğŸŒ¿ğŸ¥ğŸš­â¿ğŸŸ ğŸ¥ğŸ“¶ğŸ±ğŸ¦„ğŸ¦ğŸ•ğŸ’‰ğŸ†•ğŸ’›ğŸš­ğŸŒ¡ğŸ“‰ğŸğŸ—¾ğŸŒâ°ğŸš«ğŸ—“ğŸ¤¹ğŸ’±ğŸ‘ğŸ˜ˆğŸª•ğŸ¤ğŸ¤½ğŸğŸ•³ğŸ¥‚ğŸ·ğŸ’“ğŸ“šğŸ¤¾ğŸ†ğŸ“›ğŸºğŸš¢ğŸ’•ğŸ“ğŸ’‰ğŸğŸ®ğŸ‘•ğŸ•¶ğŸ›ğŸŒ«â„¢ğŸ‘¹ğŸ½ğŸ¥‹ğŸ‘ºğŸ«â™ğŸ“€ğŸ›¬ğŸ¤•ğŸŒ¸ğŸªğŸ¤—ğŸš¹ğŸ¦ğŸšµğŸ§¬ğŸšğŸ‹ğŸ“ğŸ¥ğŸ…±ğŸ¥‰ğŸ˜¼â˜€ğŸ’¾")
			}

			$("#btnDecode").click(async function () {
				$(this).html(getBtnDecodeWorking(lang));
				console.log("Started Calculating Password Hash.")
				await new Promise(r => setTimeout(r, 15));
				let message = $("#inputText").val();
				let key = getPassword($("#inputKey").val());

				decrypted = em_decrypt(message,key);

				if (!decrypted) {
					$(this).html(getBtnDecodeFailed(lang));
				} else {
					$(this).html(getBtnDecodeSuccess(lang));
				}

				$("#messageOut").val(decrypted);
			});
		});
	</script>
</body>

</html>