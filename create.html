<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <title>Emojiworld!</title>
  </head>
  <body class="d-block p-3">
	<ul class="nav nav-pills nav-fill">
	  <li class="nav-item">
		<a class="nav-link active bg-dark" href="create.html">Create</a>
	  </li>
	  <li class="nav-item">
		<a class="nav-link" href="use.html">Use</a>
	  </li>
	</ul>
	<hr>
	<form class="form">
	  <label for="txt1">Convert text to Emoji</label>
	  <div class="input-group mb-3">
		<div class="input-group-prepend">
			<span class="input-group-text">Text</span>
		</div>
		<textarea class="form-control" placeholder="Message" aria-label="Emoji" id="txt1" rows="5"></textarea>
	  </div>
	  	<label for="emcode">Encrypt messages with an optional password</label>
		<div class="input-group mb-3">
		  <div class="input-group-prepend">
			<span class="input-group-text" id="emcode">Key</span>
		  </div>
		  <input type="text" placeholder="(optional)" class="form-control" id="em1" aria-describedby="emcode">
		  <div class="input-group-append">
			<button id="generate" type="button" class="btn btn-primary btn-block bg-dark">Generate</button>
		  </div>
		</div>

	  <div class="input-group mb-3">
		  <div class="input-group-prepend">
			<span class="input-group-text">Valid for</span>
		  </div>
		  <select class="custom-select" id="validfor">
			<option value="1">15 minutes</option>
			<option value="2">1 hour</option>
			<option value="3" selected>5 hours</option>
			<option value="4">1 day</option>
			<option value="5">1 week</option>
			<option value="6" selected>unlimited</option>
		  </select>
		</div>
	 <button id="create_submit" type="button" class="btn btn-primary bg-dark btn-block mb-2">Convert / Encrypt</button>
	</form>
	<hr>
	<label for="basic-url">Output</label>
	<div class="input-group mb-3">
	  <textarea class="form-control" aria-label="Emoji" id="out" rows="10" readonly>Copy from here</textarea>
	  	<div class="input-group-append">
			<button id="copy" type="button" class="btn btn-primary bg-dark btn-block">Copy <br>to clipboard</button>
	    </div>
	</div>
	<hr>
	<p class="text-center">
	<b>On device encryption. No data sent. No cookies. Anti-Brutforce/ASIC/Quantum</b>
	</p>

    <!-- 
		Todo:
		- Slider for emoji key length
		- anti brudeforce algorithm
		- copy button for key

	-->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
	<script src="lib/aes.js"></script>
	<script src="emo.js"></script>
	<script>
	
	var testmode = true;

	var emo = "ğŸ˜ƒğŸ˜„ğŸ˜ğŸ˜†ğŸ˜…ğŸ˜‚ğŸ¤£â˜ºï¸ğŸ˜ŠğŸ˜‡ğŸ™‚ğŸ™ƒğŸ˜‰ğŸ˜ŒğŸ˜ğŸ˜˜ğŸ˜—ğŸ˜™ğŸ˜šğŸ˜‹ğŸ˜œğŸ˜ğŸ˜›ğŸ¤‘ğŸ¤—ğŸ¤“ğŸ˜ğŸ¤¡ğŸ¤ ğŸ˜ğŸ˜’ğŸ˜ğŸ˜”ğŸ˜ŸğŸ˜•ğŸ™â˜¹ï¸ğŸ˜£ğŸ˜–ğŸ˜«ğŸ˜©ğŸ˜¤ğŸ˜ ğŸ˜¡ğŸ˜¶ğŸ˜ğŸ˜‘ğŸ˜¯ğŸ˜¦ğŸ˜§ğŸ˜®ğŸ˜²ğŸ˜µğŸ˜³ğŸ˜±ğŸ˜¨ğŸ˜°ğŸ˜¢ğŸ˜¥ğŸ¤¤ğŸ˜­ğŸ˜“ğŸ˜ªğŸ˜´ğŸ™„ğŸ¤”ğŸ¤¥ğŸ˜¬ğŸ¤ğŸ¤¢ğŸ¤®ğŸ¤§ğŸ˜·ğŸ¤’ğŸ¤•ğŸ¤¨ğŸ¤©ğŸ¤¯ğŸ§ğŸ¤«ğŸ¤ªğŸ¤­ğŸ¥±ğŸ¥³ğŸ¥´ğŸ¥¶ğŸ¥µğŸ˜ˆğŸ‘¿ğŸ¤¬ğŸ‘¹ğŸ‘ºğŸ’©ğŸ‘»ğŸ’€â˜ ï¸ğŸ‘½ğŸ‘¾ğŸ¤–ğŸƒğŸ˜ºğŸ˜¸ğŸ˜¹ğŸ˜»ğŸ˜¼ğŸ˜½ğŸ˜¿ğŸ˜¾ğŸ™€ğŸ¶ğŸ±ğŸ­ğŸ¹ğŸ°ğŸ¦ŠğŸ»ğŸ¼ğŸ¨ğŸ¯ğŸ¦ğŸ®ğŸ·ğŸ½ğŸ¸ğŸµğŸ™ˆğŸ™‰ğŸ™ŠğŸ’ğŸ”ğŸ§ğŸ¦ğŸ¤ğŸ£ğŸ¥ğŸ¦†ğŸ¦…ğŸ¦‰ğŸ¦‡ğŸºğŸ—ğŸ´ğŸ¦„ğŸğŸ›ğŸ¦‹ğŸŒğŸšğŸğŸœğŸ•·ğŸ•¸ğŸ¢ğŸğŸ¦ğŸ¦‚ğŸ¦€ğŸ¦‘ğŸ™ğŸ¦ğŸ ğŸŸğŸ¡ğŸ¬ğŸ¦ˆğŸ³ğŸ‹ğŸŠğŸ†ğŸ…ğŸƒğŸ‚ğŸ„ğŸ¦ŒğŸªğŸ«ğŸ˜ğŸ¦ğŸ¦ğŸğŸ–ğŸğŸğŸ‘ğŸ•ğŸ©ğŸˆğŸ“ğŸ¦ƒğŸ•ŠğŸ‡ğŸğŸ€ğŸ¿ğŸ¾ğŸ‰ğŸ²ğŸ¦–ğŸ¦•ğŸ¦’ğŸ¦”ğŸ¦“ğŸ¦—ğŸ¦§ğŸ¦®ğŸ¦¥ğŸ¦¦ğŸ¦¨ğŸ¦©ğŸŒµğŸ„ğŸŒ²ğŸŒ³ğŸŒ´ğŸŒ±ğŸŒ¿â˜˜ï¸ğŸ€ğŸğŸ‹ğŸƒğŸ‚ğŸğŸ„ğŸŒ¾ğŸ’ğŸŒ·ğŸŒ¹ğŸ¥€ğŸŒ»ğŸŒ¼ğŸŒ¸ğŸŒºğŸŒğŸŒğŸŒğŸŒ•ğŸŒ–ğŸŒ—ğŸŒ˜ğŸŒ‘ğŸŒ’ğŸŒ“ğŸŒ”ğŸŒšğŸŒğŸŒğŸŒ›ğŸŒœğŸŒ™ğŸ’«â­ï¸ğŸŒŸâœ¨âš¡ï¸ğŸ”¥ğŸ’¥â˜„ï¸ğŸ›¸â˜€ï¸ğŸŒ¤â›…ï¸ğŸŒ¥ğŸŒ¦ğŸŒˆâ˜ï¸ğŸŒ§â›ˆğŸŒ©ğŸŒ¨â˜ƒï¸â›„ï¸â„ï¸ğŸŒ¬ğŸ’¨ğŸŒªğŸŒ«ğŸŒŠğŸ’§ğŸ’¦â˜”ï¸ğŸğŸğŸğŸŠğŸ‹ğŸŒğŸ‰ğŸ‡ğŸ“ğŸˆğŸ’ğŸ‘ğŸğŸ¥ğŸ¥‘ğŸ…ğŸ†ğŸ¥’ğŸ¥•ğŸŒ½ğŸŒ¶ğŸ¥”ğŸ ğŸŒ°ğŸ¥œğŸ¯ğŸ¥ğŸğŸ¥–ğŸ§€ğŸ¥šğŸ³ğŸ¥“ğŸ§„ğŸ§…ğŸ¥ğŸ§‡ğŸ¤ğŸ—ğŸ–ğŸ•ğŸŒ­ğŸ”ğŸŸğŸ¥™ğŸŒ®ğŸŒ¯ğŸ¥—ğŸ¥˜ğŸğŸœğŸ¦ªğŸ²ğŸ¥ğŸ£ğŸ±ğŸ›ğŸšğŸ§†ğŸ™ğŸ˜ğŸ¢ğŸ¡ğŸ§ğŸ¨ğŸ¦ğŸ°ğŸ‚ğŸ®ğŸ­ğŸ¬ğŸ«ğŸ¿ğŸ©ğŸªğŸ¥›ğŸ§ˆğŸ¼â˜•ï¸ğŸµğŸ¶ğŸºğŸ»ğŸ¥‚ğŸ·ğŸ¥ƒğŸ¸ğŸ¹ğŸ¾ğŸ§‰ğŸ§ƒğŸ§ŠğŸ¥„ğŸ´ğŸ½âš½ï¸ğŸ€ğŸˆâš¾ï¸ğŸ¾ğŸğŸ‰ğŸ±ğŸ“ğŸ¸ğŸ¥…ğŸ’ğŸ‘ğŸâ›³ï¸ğŸ¹ğŸ£ğŸ¥ŠğŸ¥‹â›¸ğŸ¿â›·ğŸ‚ğŸ‹ï¸â€â™€ï¸ğŸ‹ï¸ğŸ¤ºğŸ¤¼â€â™€ï¸ğŸ¤¼â€â™‚ï¸ğŸ¤¸â€â™€ï¸ğŸ¤¸â€â™‚ï¸â›¹ï¸â€â™€ï¸â›¹ï¸ğŸ¤¾â€â™€ï¸ğŸ¤¾â€â™‚ï¸ğŸŒï¸â€â™€ï¸ğŸŒï¸ğŸ„â€â™€ï¸ğŸ„ğŸŠâ€â™€ï¸ğŸŠğŸ¤½â€â™€ï¸ğŸ¤½â€â™‚ï¸ğŸš£â€â™€ï¸ğŸš£ğŸ¤¿ğŸ‡ğŸš´â€â™€ï¸ğŸš´ğŸšµâ€â™€ï¸ğŸšµğŸ–ğŸ¥‡ğŸ¥ˆğŸ¥‰ğŸ†ğŸµğŸ—ğŸ«ğŸŸğŸªğŸ¤¹â€â™€ï¸ğŸ¤¹â€â™‚ï¸ğŸ­ğŸ¨ğŸ¬ğŸ¤ğŸ§ğŸ¼ğŸ¹ğŸ¥ğŸ·ğŸºğŸ¸ğŸ»ğŸª•ğŸ²ğŸ¯ğŸ³ğŸª€ğŸªğŸ®ğŸ°ğŸš—ğŸš•ğŸš™ğŸšŒğŸšğŸğŸš“ğŸš‘ğŸš’ğŸšğŸššğŸš›ğŸšœğŸ›´ğŸš²ğŸ›µğŸğŸ›ºğŸš¨ğŸš”ğŸšğŸš˜ğŸš–ğŸš¡ğŸš ğŸšŸğŸšƒğŸš‹ğŸšğŸšğŸš„ğŸš…ğŸšˆğŸš‚ğŸš†ğŸš‡ğŸšŠğŸš‰ğŸšğŸ›©âœˆï¸ğŸ›«ğŸ›¬ğŸª‚ğŸ’ºğŸ›¶â›µ  ğŸ›³â›´ğŸš¢âš“ï¸ğŸš§â›½ï¸ğŸšğŸš¦ğŸš¥ğŸ—ºğŸ—¿ğŸ—½â›²ï¸ğŸ—¼ğŸ°ğŸ¯ğŸŸğŸ¡ğŸ¢ğŸ â›±ğŸ–ğŸâ›°ğŸ”ğŸ—»ğŸŒ‹ğŸœğŸ•â›ºï¸ğŸ›¤ğŸ›£ğŸ—ğŸ­ğŸ ğŸ¡ğŸ˜ğŸšğŸ¢ğŸ¬ğŸ£ğŸ¤ğŸ¥ğŸ¦ğŸ¨ğŸªğŸ«ğŸ©ğŸ’’ğŸ›â›ªï¸ğŸ•ŒğŸ•ğŸ›•ğŸ•‹â›©ğŸ—¾ğŸ‘ğŸğŸŒ…ğŸŒ„ğŸŒ ğŸ‡ğŸ†ğŸŒ‡ğŸŒ†ğŸ™ğŸŒƒğŸŒŒğŸªğŸŒ‰ğŸŒâŒšï¸ğŸ“±ğŸ“²ğŸ’»âŒ¨ğŸ–¥ğŸ–¨ğŸ–±ğŸ–²ğŸ•¹ğŸ—œğŸ’½ğŸ’¾ğŸ’¿ğŸ“€ğŸ“¼ğŸ“·ğŸ“¸ğŸ“¹ğŸ¥ğŸ“½ğŸğŸ“â˜ğŸ“ŸğŸ“ ğŸ“ºğŸ“»ğŸ™ğŸšğŸ›â±â²â°ğŸ•°âŒ›ï¸â³ğŸ“¡ğŸ”‹ğŸ”ŒğŸ’¡ğŸ”¦ğŸ•¯ğŸ—‘ğŸ›¢ğŸ’¸ğŸ’µğŸ’´ğŸ’¶ğŸ’·ğŸ’°ğŸ’³ğŸ’ğŸ§¿âš–ï¸ğŸ”§ğŸ”¨âš’ğŸ› â›ğŸª“ğŸ”©âš™ï¸â›“ğŸ”«ğŸªğŸ’£ğŸª’ğŸ”ªğŸ—¡âš”ï¸ğŸ›¡ğŸš¬âš°ï¸âš±ï¸ğŸºğŸª”ğŸ”®ğŸ“¿ğŸ’ˆâš—ï¸ğŸ”­ğŸ”¬ğŸ•³ğŸ¦¯ğŸ©ºğŸ’ŠğŸ’‰ğŸ©¸ğŸ©¹ğŸ¦ ğŸ§«ğŸ§¬ğŸŒ¡ğŸš½ğŸš°ğŸš¿ğŸ›ğŸ›€ğŸ›ğŸ”‘ğŸ—ğŸšªğŸ›‹ğŸ›ğŸ›ŒğŸª‘ğŸ–¼ğŸ›ğŸ›’ğŸğŸˆğŸğŸ€ğŸŠğŸ‰ğŸğŸ®ğŸâœ‰ï¸ğŸ“©ğŸ“¨ğŸ“§ğŸ’ŒğŸ“¥ğŸ“¤ğŸ“¦ğŸ·ğŸ“ªğŸ“«ğŸ“¬ğŸ“­ğŸ“®ğŸ“¯ğŸ“œğŸ“ƒğŸ“„ğŸ“‘ğŸ“ŠğŸ“ˆğŸ“‰ğŸ—’ğŸ—“ğŸ“†ğŸ“…ğŸ“‡ğŸ—ƒğŸ—³ğŸ—„ğŸ“‹ğŸ“ğŸ“‚ğŸ—‚ğŸ—ğŸ“°ğŸ““ğŸ“”ğŸ“’ğŸ“•ğŸ“—ğŸ“˜ğŸ“™ğŸ“šğŸ“–ğŸ”–ğŸ”—ğŸ“ğŸ–‡ğŸ“ğŸ“ğŸ“ŒğŸ“ğŸŒğŸ³ï¸ğŸ´ğŸğŸ³ï¸â€ğŸŒˆâœ‚ï¸ğŸ–ŠğŸ–‹âœ’ï¸ğŸ–ŒğŸ–ğŸ“âœï¸ğŸ”ğŸ”ğŸ”ğŸ”ğŸ”’ğŸ”“ğŸ’„ğŸ‘šğŸ‘•ğŸ‘–ğŸ‘”ğŸ‘—ğŸ‘™ğŸ‘˜ğŸ‘ ğŸ‘¡ğŸ‘¢ğŸ‘ğŸ‘ŸğŸ‘’ğŸ©ğŸ“ğŸ‘‘â›‘ğŸ’ğŸ‘ğŸ‘›ğŸ‘œğŸ’¼ğŸ‘“ğŸ•¶ğŸŒ‚â˜‚ï¸ğŸ’›ğŸ’šğŸ’™ğŸ’œğŸ–¤ğŸ¤ğŸ¤ğŸ§¡ğŸ’”â£ï¸ğŸ’•ğŸ’ğŸ’“ğŸ’—ğŸ’–ğŸ’˜ğŸ’ğŸ’Ÿâ˜®ï¸âœï¸â˜ªï¸ğŸ•‰â˜¸ï¸âœ¡ï¸ğŸ”¯ğŸ•â˜¯ï¸â˜¦ï¸ğŸ›â›â™ˆï¸â™‰ï¸â™Šï¸â™‹ï¸â™Œï¸â™ï¸â™ï¸â™ï¸â™ï¸â™‘ï¸â™’ï¸â™“ï¸ğŸ†”âš›ï¸ğŸˆ³ğŸ‰‘â˜¢ï¸â˜£ï¸ğŸ“´ğŸ“³ğŸˆ¶ğŸˆšï¸ğŸˆ¸ğŸˆºğŸˆ·ï¸âœ´ï¸ğŸ†šğŸ‰ãŠ™ï¸ãŠ—ï¸ğŸˆ´ğŸˆµğŸˆ¹ğŸˆ²ğŸ…°ï¸ğŸ…±ï¸ğŸ†ğŸ†‘ğŸ…¾ï¸ğŸ†˜ğŸš¼âŒâ­•ï¸ğŸ›‘â›”ï¸ğŸ“›ğŸš«ğŸ’¯ğŸ’®ğŸ’¢â™¨ï¸ğŸš·ğŸš¯ğŸš³ğŸš±ğŸ”ğŸ“µğŸš­â—ï¸â•â“â”â€¼ï¸â‰ï¸ğŸ”…ğŸ”†ã€½ï¸âš ï¸ğŸš¸ğŸ”±âšœï¸ğŸ”°â™»ï¸âœ…ğŸˆ¯ï¸ğŸ’¹â‡ï¸âœ³ï¸âğŸŒğŸ’ â“‚ï¸ğŸŒ€ğŸ’¤ğŸ§ğŸš¾â™¿ï¸ğŸ…¿ï¸ğŸˆ‚ï¸ğŸ›‚ğŸ›ƒğŸ›„ğŸ›…ğŸš¹ğŸšºğŸš»ğŸš®â¿ğŸ¦ğŸ“¶ğŸˆğŸ”£â„¹ï¸ğŸ”¤ğŸ”¡ğŸ” ğŸ†–ğŸ†™ğŸ†’ğŸ†•ğŸ†“â–¶ï¸â¸â¯â¹âºâ­â®â©âªâ«â¬â—€ï¸ğŸ”¼ğŸ”½â¡ï¸â¬…ï¸â¬†ï¸â¬‡ï¸â†—ï¸â†˜ï¸â†™ï¸â†–ï¸â†ªï¸â†©ï¸â¤´ï¸â¤µï¸ğŸ”€ğŸ”ğŸ”‚ğŸ”„ğŸ”ƒğŸ”šğŸ”™ğŸ”›ğŸ”ğŸ”œâ˜‘ï¸â†•ï¸â†”ï¸ğŸµğŸ¶â•â–â—âœ–ï¸ğŸ’²ğŸ’±â„¢ï¸Â©ï¸Â®ï¸ã€°ï¸â°âœ”ï¸ğŸ”˜âš«ï¸âšªï¸ğŸ”´ğŸ”µğŸŸ£â€‹ğŸŸ ğŸŸ¢ğŸŸ£ğŸ”ºğŸ”»ğŸ”¸ğŸ”¹ğŸ”¶ğŸ”·ğŸ”³ğŸ”²â–ªï¸â–«ï¸â—¾ï¸â—½ï¸â—¼ï¸â—»ï¸â¬›ï¸â¬œï¸ğŸŸ§ğŸŸ©ğŸŸ¦ğŸ”ˆğŸ”‡ğŸ”‰ğŸ”ŠğŸ””ğŸ”•ğŸ“£ğŸ“¢ğŸ‘â€ğŸ—¨ğŸ’¬ğŸ’­ğŸ—¯â™ ï¸â™£ï¸â™¥ï¸â™¦ï¸ğŸƒğŸ´ğŸ€„ï¸ğŸ•ğŸ•‘ğŸ•’ğŸ•“ğŸ•”ğŸ••ğŸ•–ğŸ•—ğŸ•˜ğŸ•™ğŸ•šğŸ•›ğŸ•œğŸ•ğŸ•ğŸ•¡ğŸ•¢ğŸ•£ğŸ•¤ğŸ•¥ğŸ•¦ğŸ•§"
	
	$(document).ready(function(){

		emo_array = stringToArray(emo);
		emo_array = removeItemAll(emo_array,"ï¸");
		emo_array = removeItemAll(emo_array," ");
		emo_array = removeItemAll(emo_array,"â€");
		emo_array = removeItemAll(emo_array,"â€‹");

				
		let keylength = 256;

		if (testmode) {
			$("#txt1").val("Hello World!"); 
			let key1 = $("#em1").val();
			$("#em1").val(generateRandomEmo(keylength,emo_array));
		}


		$("#create_submit").click(function(){
			var message = $("#txt1").val();
			var key1 = getPassword($("#em1").val());
			var validfor = $("#validfor").val();

			if (validfor != 6) {
				
			}
			do {
				var encrypted = CryptoJS.AES.encrypt(message, key1);
				var encryptedString = encrypted.toString();
				var encryptedHex = base64ToHex(encryptedString);
				var emojiString = hexToEmo(encryptedHex, emo_array);
				var testHex = emoToHex(emojiString, emo_array);
			} while (testHex != encryptedHex)

			$("#out").val(emojiString);
		});

		$("#generate").click(function(){
			$("#em1").val(generateRandomEmo(keylength,emo_array));
		});

		$("#copy").click(function(){
		 var copyText = document.getElementById("out");
		  copyText.select();
		  copyText.setSelectionRange(0, 99999); 
		  document.execCommand("copy");
		});


	});
	</script> 
  </body>
</html>