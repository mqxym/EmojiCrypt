<!doctype html>
<html lang="en">
<head>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Favicon and Manifest -->
    <link rel="icon" type="image/x-icon" href="icon/favicon.ico">
    <link rel="apple-touch-icon" href="/icon/apple-touch-icon.png">
    <link rel="manifest" href="manifest.webmanifest">
    <!-- SEO Meta Tags -->
    <meta name="description" content="Convert text to emojis or encrypt text with emojis and turn them to even more emojis." />
    <meta name="keywords" content="Encrypt,Decrypt,AES,Blowfish,AES256,Encryption,Online,HTML,Javascript,Offline,Download,Sourcecode,Emoji,Emo" />
    <meta name="author" content="Marques Xiaomi" />
    <meta name="copyright" content="Maxim Schulz" />
    <meta name="page-topic" content="Computer" />
    <meta http-equiv="Reply-to" content="maxim@omg.lol" />
    <meta name="expires" content="" />
    <meta name="revisit-after" content="2 days" />
    <!-- CSS and JS Links -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <title>🌘 - to the moon! Text to Emoji and Emoji-Encryption</title>
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/bootstrap.bundle.js"></script>
    <script src="js/crypto.js"></script>
    <style>
        body,
        html {
            height: 100%;
            overflow-x: hidden;
        }

        .info-section {
            left: 100%;
        }

        .encrypt-section {
            left: -100%;
        }

        .main-container {
            position: relative;
        }

        .main-content {
            position: absolute;
            width: 100%;
        }

        .faq-button {
            text-align: left;
            width: 100%;
            border: none;
            background: none;
            padding: 0;
            white-space: normal;
            word-break: break-word;
        }

        .btn {
            border-color: #ced4da; /* Light gray border */
        }

        .btn:hover {
            background-color: #e2e6ea; /* Slightly darker on hover */
        }

        /* Default placeholder color */
        .form-control::placeholder {
            color: #6c757d; /* Bootstrap's default placeholder color */
        }

        /* Placeholder color in dark mode */
        .dark-mode .form-control::placeholder {
            color: #cccccc; /* Light gray placeholder color for dark mode */
        }

    </style>
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" id="navbarBrand" href="#">Text 📄 🔄 🌈 Emoji</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <!-- Navbar Menu -->
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ml-auto">
                <!-- Choose App Dropdown -->
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="chooseAppMenu" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Choose App
                    </a>
                    <div class="dropdown-menu" aria-labelledby="appMenu">
                        <a class="dropdown-item" id="convertMenu" href="?convert">🔄 Convert</a>
                        <a class="dropdown-item" id="encryptMenu" href="?encrypt">🔐 Encrypt</a>
                    </div>
                </li>
                <!-- About Menu Item -->
                <li class="nav-item">
                    <a class="nav-link" id="aboutMenu" href="?about">About</a>
                </li>
                <!-- Dark Mode Toggle -->
                <li class="nav-item">
                    <a class="nav-link" id="darkModeMenu">Enable Dark Mode</a>
                </li>
                <!-- Language Selector -->
                <li class="nav-item">
                    <select class="form-control" id="languageSelect">
                        <option value="0">English 🇺🇸</option>
                        <option value="1">German 🇩🇪</option>
                        <option value="2">Modern Chinese 🇨🇳</option>
                        <option value="3">Russian 🇷🇺</option>
                        <option value="4">Spanish 🇪🇸</option>
                        <option value="5">French 🇫🇷</option>
                    </select>
                </li>
            </ul>
        </div>
    </nav>
    <!-- Main Content -->
    <div class="main-container">
        <!-- Encryption/Decryption Section -->
        <div class="main-content p-3 encrypt-section" id="encryptSection">
            <form class="form">
                <!-- Message Input -->
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">✉️</span>
                    </div>
                    <textarea class="form-control" placeholder="Message" aria-label="Emoji" id="encryptMessageInput" rows="5"></textarea>
                    <div class="input-group-append">
                        <button id="clearEncryptInputButton" type="button" class="btn btn-secondary btn-block bg-dark">Delete <br> Message</button>
                    </div>
                </div>
                <!-- Key Input -->
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="keyIcon">🔑</span>
                    </div>
                    <input type="text" placeholder="(optional)" class="form-control" id="keyInput" aria-describedby="keyIcon">
                    <div class="input-group-append">
                        <button id="generateKeyButton" type="button" class="btn btn-secondary btn-block bg-dark">🔄</button>
                    </div>
                    <div class="input-group-append">
                        <button id="copyKeyButton" type="button" class="btn btn-secondary bg-dark btn-block">Copy</button>
                    </div>
                </div>
                <hr>
                <!-- Key Storage Instructions -->
                <div id="keyInstructions" class="mb-2">
                    Load or save keys
                </div>
                <div class="row">
                    <div class="col">
                        <div class="form-group">
                            <select class="form-control" id="keySlotSelect">
                                <option value="1">Slot 1️⃣</option>
                                <option value="2">Slot 2️⃣</option>
                                <option value="3">Slot 3️⃣</option>
                                <option value="4">Slot 4️⃣</option>
                                <option value="5">Slot 5️⃣</option>
                            </select>
                        </div>
                    </div>
                    <div class="col">
                        <button id="loadKeyButton" type="button" class="btn btn-secondary bg-dark btn-block mb-2">📲 Load</button>
                        <button id="saveKeyButton" type="button" class="btn btn-secondary bg-dark btn-block mb-2">💾 Save</button>
                    </div>
                </div>
                <hr>
                <!-- Encrypt/Decrypt Button -->
                <button id="encryptDecryptButton" type="button" class="btn btn-secondary bg-dark btn-block mb-2">🔀 Encrypt / Decrypt</button>
            </form>
            <hr>
            <!-- Output Message -->
            <div class="input-group mb-3">
                <textarea class="form-control" aria-label="Emoji" id="encryptOutputTextarea" rows="10" readonly>Decrypted/Encrypted message</textarea>
                <div class="input-group-append">
                    <button id="copyEncryptOutputButton" type="button" class="btn btn-secondary btn-block bg-dark">Copy <br>to clipboard</button>
                </div>
            </div>
        </div>
        <!-- Conversion Section -->
        <div class="main-content p-3 convert-section" id="convertSection">
            <form class="form">
                <!-- Message Input -->
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">✉️</span>
                    </div>
                    <textarea class="form-control" placeholder="Message" aria-label="Emoji" id="convertMessageInput" rows="5"></textarea>
                    <div class="input-group-append">
                        <button id="clearConvertInputButton" type="button" class="btn btn-secondary btn-block bg-dark">Delete <br> Message</button>
                    </div>
                </div>
                <hr>
                <!-- Convert Button -->
                <button id="convertButton" type="button" class="btn btn-secondary bg-dark btn-block mb-2">🔄 Convert</button>
            </form>
            <hr>
            <!-- Output Message -->
            <div class="input-group mb-3">
                <textarea class="form-control" aria-label="Emoji" id="convertOutputTextarea" rows="10" readonly>Converted message</textarea>
                <div class="input-group-append">
                    <button id="copyConvertOutputButton" type="button" class="btn btn-secondary btn-block bg-dark">Copy <br>to clipboard</button>
                </div>
            </div>
        </div>
        <!-- About Section -->
		<div class="p-3 main-content info-section" id="aboutSection">
            <div class="text-center">
                <h6 id="explanation">[Explanation text]</h6>
            </div>
            <hr>
            <!-- FAQ Section -->
            <div class="accordion" id="faqAccordion">
                <!-- FAQ Item 1 -->
                <div class="card">
                    <div class="card-header" id="faqHeading1">
                        <h5 class="mb-0">
                            <button class="btn faq-button" type="button" data-toggle="collapse" data-target="#faqCollapse1" aria-expanded="true" aria-controls="faqCollapse1">
                                <strong id="faqQuestion1">What is NasaEmoji?</strong>
                            </button>
                        </h5>
                    </div>

                    <div id="faqCollapse1" class="collapse show" aria-labelledby="faqHeading1" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer1">NasaEmoji is a secure encryption tool that allows you to encrypt and decrypt messages using emojis as keys and output.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 2 -->
                <div class="card">
                    <div class="card-header" id="faqHeading2">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse2" aria-expanded="false" aria-controls="faqCollapse2">
                                <strong id="faqQuestion2">How do I encrypt a message?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse2" class="collapse" aria-labelledby="faqHeading2" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer2">To encrypt a message, enter your message in the input field, generate or enter a key, and click the "Encrypt" button. The encrypted message will be displayed in emojis.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 3 -->
                <div class="card">
                    <div class="card-header" id="faqHeading3">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse3" aria-expanded="false" aria-controls="faqCollapse3">
                                <strong id="faqQuestion3">How do I decrypt a message?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse3" class="collapse" aria-labelledby="faqHeading3" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer3">To decrypt a message, paste the emoji-encrypted message into the input field, enter the key used to encrypt it, and click the "Decrypt" button.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 4 -->
                <div class="card">
                    <div class="card-header" id="faqHeading4">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse4" aria-expanded="false" aria-controls="faqCollapse4">
                                <strong id="faqQuestion4">How do I generate an emoji key?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse4" class="collapse" aria-labelledby="faqHeading4" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer4">You can generate a random emoji key by clicking the "Generate Key" button. The key is used to encrypt and decrypt messages.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 5 -->
                <div class="card">
                    <div class="card-header" id="faqHeading5">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse5" aria-expanded="false" aria-controls="faqCollapse5">
                                <strong id="faqQuestion5">Is my data secure?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse5" class="collapse" aria-labelledby="faqHeading5" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer5">Yes, all encryption and decryption happen locally on your device. No data is sent anywhere, ensuring your messages remain private.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 6 -->
                <div class="card">
                    <div class="card-header" id="faqHeading6">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse6" aria-expanded="false" aria-controls="faqCollapse6">
                                <strong id="faqQuestion6">Can I convert text to emojis without encryption?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse6" class="collapse" aria-labelledby="faqHeading6" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer6">Yes, NasaEmoji allows you to convert any text to emojis and back without encryption using the "Convert" feature.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 7 -->
                <div class="card">
                    <div class="card-header" id="faqHeading7">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse7" aria-expanded="false" aria-controls="faqCollapse7">
                                <strong id="faqQuestion7">What encryption algorithms does NasaEmoji use?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse7" class="collapse" aria-labelledby="faqHeading7" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer7">NasaEmoji uses a combination of AES-256, Blowfish, and XOR encryption algorithms to secure your messages.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 8 -->
                <div class="card">
                    <div class="card-header" id="faqHeading8">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse8" aria-expanded="false" aria-controls="faqCollapse8">
                                <strong id="faqQuestion8">Why are multiple encryption algorithms used?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse8" class="collapse" aria-labelledby="faqHeading8" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer8">Using multiple algorithms enhances security by adding layers of encryption, making it more difficult for unauthorized parties to decrypt the message.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 9 -->
                <div class="card">
                    <div class="card-header" id="faqHeading9">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse9" aria-expanded="false" aria-controls="faqCollapse9">
                                <strong id="faqQuestion9">What is key hashing and why is it used?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse9" class="collapse" aria-labelledby="faqHeading9" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer9">Key hashing transforms your key into a fixed-size hash using multiple algorithms, enhancing security by preventing direct access to the original key and making brute-force attacks more difficult.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 10 -->
                <div class="card">
                    <div class="card-header" id="faqHeading10">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse10" aria-expanded="false" aria-controls="faqCollapse10">
                                <strong id="faqQuestion10">How does key hashing prevent brute-force attacks?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse10" class="collapse" aria-labelledby="faqHeading10" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer10">By hashing the key multiple times with different algorithms and salts, it increases the computational effort required to guess the key, thus deterring brute-force attempts.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 11 -->
                <div class="card">
                    <div class="card-header" id="faqHeading11">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse11" aria-expanded="false" aria-controls="faqCollapse11">
                                <strong id="faqQuestion11">What is the CryptoJS library?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse11" class="collapse" aria-labelledby="faqHeading11" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer11">CryptoJS is a widely used JavaScript library that provides standard and secure cryptographic algorithms for encryption and hashing.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 12 -->
                <div class="card">
                    <div class="card-header" id="faqHeading12">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse12" aria-expanded="false" aria-controls="faqCollapse12">
                                <strong id="faqQuestion12">How secure is the CryptoJS library?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse12" class="collapse" aria-labelledby="faqHeading12" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer12">CryptoJS is considered secure as it implements well-known cryptographic algorithms correctly. It is used in many applications for secure data handling.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 13 -->
                <div class="card">
                    <div class="card-header" id="faqHeading13">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse13" aria-expanded="false" aria-controls="faqCollapse13">
                                <strong id="faqQuestion13">How does NasaEmoji handle key storage?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse13" class="collapse" aria-labelledby="faqHeading13" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer13">You can save keys locally in one of the 5 available slots using your browser's local storage for quick access.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 14 -->
                <div class="card">
                    <div class="card-header" id="faqHeading14">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse14" aria-expanded="false" aria-controls="faqCollapse14">
                                <strong id="faqQuestion14">Does NasaEmoji send any data over the internet?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse14" class="collapse" aria-labelledby="faqHeading14" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer14">No, all operations are performed locally on your device. NasaEmoji does not send any data over the internet.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 15 -->
                <div class="card">
                    <div class="card-header" id="faqHeading15">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse15" aria-expanded="false" aria-controls="faqCollapse15">
                                <strong id="faqQuestion15">Can I use NasaEmoji offline?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse15" class="collapse" aria-labelledby="faqHeading15" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer15">Yes, you can download NasaEmoji for local execution and use it offline without an internet connection.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 17 -->
                <div class="card">
                    <div class="card-header" id="faqHeading17">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse17" aria-expanded="false" aria-controls="faqCollapse17">
                                <strong id="faqQuestion17">Is the encryption standardized?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse17" class="collapse" aria-labelledby="faqHeading17" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer17">NasaEmoji uses standard encryption algorithms but combines them in a unique way. While secure, it is recommended for casual use rather than critical security applications.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 18 -->
                <div class="card">
                    <div class="card-header" id="faqHeading18">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse18" aria-expanded="false" aria-controls="faqCollapse18">
                                <strong id="faqQuestion18">Can I trust NasaEmoji for highly sensitive information?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse18" class="collapse" aria-labelledby="faqHeading18" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer18">While NasaEmoji employs strong encryption, it is primarily designed for personal and casual use. For highly sensitive information, consult security professionals.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 19 -->
                <div class="card">
                    <div class="card-header" id="faqHeading19">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse19" aria-expanded="false" aria-controls="faqCollapse19">
                                <strong id="faqQuestion19">Is NasaEmoji open-source?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse19" class="collapse" aria-labelledby="faqHeading19" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer19">Yes, NasaEmoji's source code is available on GitHub, allowing you to review and contribute to its development.</span>
                        </div>
                    </div>
                </div>
                <!-- FAQ Item 20 -->
                <div class="card">
                    <div class="card-header" id="faqHeading20">
                        <h5 class="mb-0">
                            <button class="btn faq-button collapsed" type="button" data-toggle="collapse" data-target="#faqCollapse20" aria-expanded="false" aria-controls="faqCollapse20">
                                <strong id="faqQuestion20">How can I contribute to NasaEmoji?</strong>
                            </button>
                        </h5>
                    </div>
                    <div id="faqCollapse20" class="collapse" aria-labelledby="faqHeading20" data-parent="#faqAccordion">
                        <div class="card-body">
                            <span id="faqAnswer20">You can contribute by visiting the GitHub repository, reporting issues, suggesting improvements, or submitting pull requests.</span>
                        </div>
                    </div>
                </div>
            </div>


            <hr>
            <p class="text-center">
                <b id="footerHighlight">[Footer Highlight]</b>
            </p>
            <div class="form-group text-center">
            </div>
            <hr>
            <div class="text-center">
                <a href="https://github.com/mqxym/EmojiCrypt" id="footerSource">Sourcecode (Github)</a>
                <br>
                Copy Url: https://nasaemoji.com
                <br>
            </div>
        </div>
    </div>
    <!-- External Scripts -->
    <script src="js/base-64.js" defer></script>
    <script src="js/lib.js" defer></script>
    <script src="js/emo.js" defer></script>
    <script src="js/lang.js" defer></script>

    <script>
        // Language index, default to 0 (English)
        let languageIndex = 0;

        // Load language index from local storage if available
        if (localStorage.getItem("lang")) {
            languageIndex = parseInt(localStorage.getItem("lang"));
            $("#languageSelect").val(languageIndex);
        }

        /**
         * Update the UI elements with the translations based on the selected language.
         */
        function updateUILanguage() {
            $("#navbarBrand").html(getTranslation("navbarBrand", languageIndex));
            $("#chooseAppMenu").html(getTranslation("chooseAppMenu", languageIndex));
            $("#encryptMenu").html(getTranslation("encryptMenu", languageIndex));
            $("#convertMenu").html(getTranslation("convertMenu", languageIndex));
            $("#aboutMenu").html(getTranslation("aboutMenu", languageIndex));

            $("#clearEncryptInputButton").html(getTranslation("clearEncryptInputButton", languageIndex));
            $("#encryptMessageInput").attr("placeholder", getTranslation("encryptMessageInput", languageIndex));
            $("#keyInput").attr("placeholder", getTranslation("keyInput", languageIndex));
            $("#encryptDecryptButton").html(getTranslation("encryptDecryptButton", languageIndex));

            $("#copyKeyButton").html(getTranslation("copyKeyButton", languageIndex));
            $("#keyInstructions").html(getTranslation("keyInstructions", languageIndex));
            $("#loadKeyButton").html(getTranslation("loadKeyButton", languageIndex));
            $("#saveKeyButton").html(getTranslation("saveKeyButton", languageIndex));
            $("#encryptOutputTextarea").html(getTranslation("encryptOutputTextarea", languageIndex));
            $("#copyEncryptOutputButton").html(getTranslation("copyEncryptOutputButton", languageIndex));

            $("#clearConvertInputButton").html(getTranslation("clearConvertInputButton", languageIndex));
            $("#convertMessageInput").attr("placeholder", getTranslation("convertMessageInput", languageIndex));
            $("#convertButton").html(getTranslation("convertButton", languageIndex));
            $("#convertOutputTextarea").html(getTranslation("convertOutputTextarea", languageIndex));
            $("#copyConvertOutputButton").html(getTranslation("copyConvertOutputButton", languageIndex));

            $("#explanation").html(getTranslation("explanation", languageIndex));
            $("#footerHighlight").html(getTranslation("footerHighlight", languageIndex));
            $("#footerSource").html(getTranslation("footerSource", languageIndex));

            // Update Dark Mode Menu Text
            if (isDarkModeEnabled()) {
                $("#darkModeMenu").html(getTranslation("disableDarkMode", languageIndex));
            } else {
                $("#darkModeMenu").html(getTranslation("enableDarkMode", languageIndex));
            }

			// Update FAQ items
			for (let i = 1; i <= 20; i++) {
                $("#faqQuestion" + i).html(getTranslation("faqQuestion" + i, languageIndex));
                $("#faqAnswer" + i).html(getTranslation("faqAnswer" + i, languageIndex));
            }
        }

        /**
         * Check if dark mode is enabled.
         * @returns {boolean} - True if dark mode is enabled.
         */
         function isDarkModeEnabled() {
            return localStorage.getItem('darkMode') === 'true';
        }

        /**
         * Enable dark mode by adding appropriate classes.
         */
         function enableDarkMode() {
            $('body').addClass('bg-dark text-light dark-mode');
            $('.navbar').removeClass('navbar-light bg-light').addClass('navbar-dark bg-dark');

            $('.main-content').addClass('bg-dark text-light');

            // Dropdown menu
            $('.dropdown-menu').addClass('bg-dark');
            $('.dropdown-item').addClass('text-light');

            // FAQ section
            $('.card').addClass('bg-dark text-light');
            $('.card-header').addClass('bg-dark');
            $('.card-body').addClass('bg-dark text-light');
            $('.faq-button').addClass('text-light');
            $('.collapse').addClass('bg-dark text-light');

            $('.input-group-text').addClass('bg-dark text-light');
            $('.form-control').addClass('bg-secondary text-light');

            // Make hr divider lighter
            $('hr').css('border-top', '1px solid #666'); // Adjust the color as needed

            // Save dark mode state
            localStorage.setItem('darkMode', 'true');

            // Update dark mode menu text
            $("#darkModeMenu").html(getTranslation("disableDarkMode", languageIndex));
        }

        /**
         * Disable dark mode by removing appropriate classes.
         */
         function disableDarkMode() {
            $('body').removeClass('bg-dark text-light dark-mode');
            $('.navbar').removeClass('navbar-dark bg-dark').addClass('navbar-light bg-light');

            $('.main-content').removeClass('bg-dark text-light');

            // Dropdown menu
            $('.dropdown-menu').removeClass('bg-dark');
            $('.dropdown-item').removeClass('text-light');

            // FAQ section
            $('.card').removeClass('bg-dark text-light');
            $('.card-header').removeClass('bg-dark');
            $('.card-body').removeClass('bg-dark text-light');
            $('.faq-button').removeClass('text-light');
            $('.collapse').removeClass('bg-dark text-light');

            $('.input-group-text').removeClass('bg-dark text-light');
            $('.form-control').removeClass('bg-secondary text-light');

            // Reset hr divider color
            $('hr').css('border-top', '');


            // Save dark mode state
            localStorage.setItem('darkMode', 'false');

            // Update dark mode menu text
            $("#darkModeMenu").html(getTranslation("enableDarkMode", languageIndex));
        }

        // Mapping of menu IDs to their corresponding div IDs and their order
        const menuOrder = ['encryptSection', 'convertSection', 'aboutSection'];
        const menuMap = {
            'encryptMenu': 'encryptSection',
            'convertMenu': 'convertSection',
            'aboutMenu': 'aboutSection'
        };

        // Flag to prevent multiple simultaneous transitions
        let isTransitioning = false;

        // Initialize currentMenu based on URL parameter
        let currentMenu = getSectionFromURL();

        /**
         * Parses the URL parameters to determine which section to display.
         * @returns {string} - The ID of the section to display.
         */
        function getSectionFromURL() {
            const params = new URLSearchParams(window.location.search);
            if (params.has('about')) {
                return 'aboutSection';
            } else if (params.has('encrypt')) {
                return 'encryptSection';
            } else if (params.has('convert')) {
                return 'convertSection';
            } else {
                return 'convertSection'; // Default section
            }
        }

        /**
         * Sets the initial positions of the sections based on the current menu.
         * Positions other sections off-screen to the left or right.
         */
        function setInitialSectionPositions() {
            const currentIndex = menuOrder.indexOf(currentMenu);
            menuOrder.forEach(function(section, index) {
                const offset = index - currentIndex;
                const leftPosition = offset * 100; // Offset in percent
                $('#' + section).css('left', leftPosition + '%');
            });
        }

        /**
         * Updates the URL parameter to reflect the current section.
         */
        function updateURLParameter() {
            const paramName = getURLParamNameForSection(currentMenu);
            const newURL = window.location.protocol + "//" + window.location.host + window.location.pathname + '?' + paramName;
            window.history.pushState({ path: newURL }, '', newURL);
        }
        
        /**
         * Gets the URL parameter name corresponding to a section.
         * @param {string} section - The ID of the section.
         * @returns {string} - The URL parameter name.
         */
        function getURLParamNameForSection(section) {
            if (section === 'encryptSection') {
                return 'encrypt';
            } else if (section === 'convertSection') {
                return 'convert';
            } else if (section === 'aboutSection') {
                return 'about';
            }
        }

        /**
         * Checks if two sections are adjacent in the menu order.
         * @param {string} from - The ID of the current section.
         * @param {string} to - The ID of the target section.
         * @returns {boolean} - True if the sections are adjacent.
         */
        function areAdjacent(from, to) {
            const fromIndex = menuOrder.indexOf(from);
            const toIndex = menuOrder.indexOf(to);
            return Math.abs(fromIndex - toIndex) === 1;
        }

        /**
         * Animates the transition between two sections by adjusting their positions.
         * @param {string} fromDiv - The ID of the current section.
         * @param {string} toDiv - The ID of the target section.
         * @param {function} callback - Callback function after animation completes.
         */
        function animateTransition(fromDiv, toDiv, callback) {
            const fromIndex = menuOrder.indexOf(fromDiv);
            const toIndex = menuOrder.indexOf(toDiv);
            const direction = toIndex > fromIndex ? 'left' : 'right';

            const fromAnimation = {};
            const toAnimation = {};

            if (direction === 'left') {
                fromAnimation.left = '-100%';
                toAnimation.left = '0%';
                $('#' + toDiv).css('left', '100%');
            } else {
                fromAnimation.left = '100%';
                toAnimation.left = '0%';
                $('#' + toDiv).css('left', '-100%');
            }

            $('#' + fromDiv).animate(fromAnimation, 500);
            $('#' + toDiv).animate(toAnimation, 500, function () {
                if (typeof callback === 'function') {
                    callback();
                }
            });
        }

        /**
         * Transitions to the target section with an animation.
         * @param {string} targetDiv - The ID of the target section.
         * @param {boolean} [pushState=true] - Whether to update the browser history.
         */
        function transitionToSection(targetDiv, pushState = true) {
            if (isTransitioning || targetDiv === currentMenu) return;

            isTransitioning = true;

            const needsIntermediate = !areAdjacent(currentMenu, targetDiv);

            if (needsIntermediate) {
                const intermediate = 'convertSection';
                animateTransition(currentMenu, intermediate, function () {
                    currentMenu = intermediate;
                    animateTransition(intermediate, targetDiv, function () {
                        currentMenu = targetDiv;
                        isTransitioning = false;

                        if (pushState) {
                            updateURLParameter();
                        }
                    });
                });
            } else {
                animateTransition(currentMenu, targetDiv, function () {
                    currentMenu = targetDiv;
                    isTransitioning = false;

                    if (pushState) {
                        updateURLParameter();
                    }
                });
            }

            // Collapse the navbar if in mobile mode
            if ($('.navbar-toggler').is(':visible')) {
                $('.navbar-collapse').collapse('hide');
            }

            // Update metadata
            updateMetadata();
        }

        /**
         * Parses a URL string to determine which section to display.
         * @param {string} url - The URL string to parse.
         * @returns {string} - The ID of the section to display.
         */
        function getSectionFromURLString(url) {
            const params = new URLSearchParams(url.substring(1)); // Remove '?' from the start
            if (params.has('about')) {
                return 'aboutSection';
            } else if (params.has('encrypt')) {
                return 'encryptSection';
            } else if (params.has('convert')) {
                return 'convertSection';
            } else {
                return 'convertSection'; // Default section
            }
        }

        /**
         * Updates the page's metadata based on the current section.
         */
        function updateMetadata() {
            let title, description;

            if (currentMenu === 'encryptSection') {
                title = 'Encrypt Text with Emojis - Emoji Encryption Tool';
                description = 'Securely encrypt and decrypt messages using emojis.';
            } else if (currentMenu === 'convertSection') {
                title = 'Convert Text to Emojis - Emoji Conversion Tool';
                description = 'Easily convert your text into emojis and back.';
            } else if (currentMenu === 'aboutSection') {
                title = 'About Emoji Encryption Tool';
                description = 'Learn more about our emoji encryption and conversion tool.';
            }

            document.title = title;
            $('meta[name="description"]').attr('content', description);
        }

        $(document).ready(function () {

            updateUILanguage();

            // Initialize currentMenu based on URL parameter
            currentMenu = getSectionFromURL();

            // Set initial positions of sections
            setInitialSectionPositions();

            // Update metadata
            updateMetadata();

            // Handle popstate events (back/forward buttons)
            window.onpopstate = function(event) {
                const targetSection = getSectionFromURL();
                transitionToSection(targetSection, false);
            };

            if (isDarkModeEnabled()) {
                enableDarkMode();
            } else {
                disableDarkMode();
            }

            // Dark Mode Toggle
            $("#darkModeMenu").click(function () {
                if (isDarkModeEnabled()) {
                    disableDarkMode();
                } else {
                    enableDarkMode();
                }
            });

            // Encrypt/Decrypt Button Click Handler
            $("#encryptDecryptButton").click(async function () {
                const $thisButton = $(this);
                const inputText = $("#encryptMessageInput").val();

                // Show error if input text is empty
                if (!inputText) {
                    $thisButton.html(getTranslation("error", languageIndex));
                    await new Promise(r => setTimeout(r, 1000));
                    $thisButton.html(getTranslation("encryptDecryptButton", languageIndex));
                    return;
                }

                const inputType = checkInputString(inputText);

                if (!inputType) {
                    // Encryption
                    $thisButton.html(getTranslation("btnEncodeWorking", languageIndex));
                    await new Promise(r => setTimeout(r, 15));

                    const message = inputText;
                    const key = getPassword($("#keyInput").val());

                    const emojiString = encrypt(message, key);

                    if (!emojiString) {
                        // Encryption failed
                        $thisButton.html(getTranslation("btnEncodeFailed", languageIndex));
                    } else {
                        // Encryption succeeded
                        $("#encryptOutputTextarea").val(emojiString);
                        $thisButton.html(getTranslation("btnEncodeSuccess", languageIndex));
                    }
                    await new Promise(r => setTimeout(r, 5000));
                    $thisButton.html(getTranslation("encryptDecryptButton", languageIndex));
                } else {
                    // Decryption
                    $thisButton.html(getTranslation("btnDecodeWorking", languageIndex));
                    await new Promise(r => setTimeout(r, 15));

                    const message = inputText;
                    const key = getPassword($("#keyInput").val());

                    const decryptedText = decrypt(message, key);

                    if (!decryptedText) {
                        // Decryption failed
                        $thisButton.html(getTranslation("btnDecodeFailed", languageIndex));
                        $("#encryptOutputTextarea").val("");
                    } else {
                        // Decryption succeeded
                        $("#encryptOutputTextarea").val(decryptedText);
                        $thisButton.html(getTranslation("btnDecodeSuccess", languageIndex));
                    }
                    await new Promise(r => setTimeout(r, 5000));
                    $thisButton.html(getTranslation("encryptDecryptButton", languageIndex));
                }
            });

            // Convert Button Click Handler
            $("#convertButton").click(async function () {
                const $thisButton = $(this);
                const inputText = $("#convertMessageInput").val();

                // Show error if input text is empty
                if (!inputText) {
                    $thisButton.html(getTranslation("error", languageIndex));
                    await new Promise(r => setTimeout(r, 1000));
                    $thisButton.html(getTranslation("convertButton", languageIndex));
                    return;
                }

                // Check if the input is base64, hex, or emoji
                const inputType = checkInputString(inputText);

                if (!inputType) {
                    // Encoding
                    $thisButton.html(getTranslation("btnEncodeWorkingConvert", languageIndex));
                    await new Promise(r => setTimeout(r, 15));

                    const message = inputText;

                    const encodedText = encode(message);

                    if (!encodedText) {
                        // Encoding failed
                        $thisButton.html(getTranslation("btnEncodeFailedConvert", languageIndex));
                    } else {
                        // Encoding succeeded
                        $("#convertOutputTextarea").val(encodedText);
                        $thisButton.html(getTranslation("btnEncodeSuccessConvert", languageIndex));
                    }
                    await new Promise(r => setTimeout(r, 5000));
                    $thisButton.html(getTranslation("convertButton", languageIndex));
                } else {
                    // Decoding
                    $thisButton.html(getTranslation("btnDecodeWorkingConvert", languageIndex));
                    await new Promise(r => setTimeout(r, 15));

                    const message = inputText;

                    const decodedText = decode(message);

                    if (!decodedText) {
                        // Decoding failed
                        $thisButton.html(getTranslation("btnDecodeFailedConvert", languageIndex));
                        $("#convertOutputTextarea").val("");
                    } else {
                        // Decoding succeeded
                        $("#convertOutputTextarea").val(decodedText);
                        $thisButton.html(getTranslation("btnDecodeSuccessConvert", languageIndex));
                    }
                    await new Promise(r => setTimeout(r, 5000));
                    $thisButton.html(getTranslation("convertButton", languageIndex));
                }
            });

            // Clear input text
            $("#clearEncryptInputButton").click(function () {
                $("#encryptMessageInput").val("");
            });

            $("#clearConvertInputButton").click(function () {
                $("#convertMessageInput").val("");
            });

            // Generate random key
            $("#generateKeyButton").click(function () {
                $("#keyInput").val(generateRandomKey());
            });

            // Copy key to clipboard
            $("#copyKeyButton").click(function () {
                const copyText = document.getElementById("keyInput");
                copyText.select();
                copyText.setSelectionRange(0, 99999);
                document.execCommand("copy");
            });

            // Copy output message to clipboard
            $("#copyEncryptOutputButton").click(function () {
                const copyText = document.getElementById("encryptOutputTextarea");
                copyText.select();
                copyText.setSelectionRange(0, 99999);
                document.execCommand("copy");
            });

            $("#copyConvertOutputButton").click(function () {
                const copyText = document.getElementById("convertOutputTextarea");
                copyText.select();
                copyText.setSelectionRange(0, 99999);
                document.execCommand("copy");
            });

            // Load key from local storage
            $("#loadKeyButton").click(async function () {
                const $thisButton = $(this);
                const slot = $("#keySlotSelect").val();

                $thisButton.html(getTranslation("loadKey", languageIndex));
                $thisButton.removeClass("bg-dark").addClass("bg-success");

                const storedKey = localStorage.getItem("key" + slot);
                if (storedKey) {
                    $("#keyInput").val(storedKey);
                } else {
                    $thisButton.removeClass("bg-success").addClass("bg-danger");
                    $thisButton.html(getTranslation("error", languageIndex));
                }

                await new Promise(r => setTimeout(r, 1000));
                $thisButton.removeClass("bg-success bg-danger").addClass("bg-dark");
                $thisButton.html(getTranslation("loadKeyButton", languageIndex));
            });

            // Save key to local storage
            $("#saveKeyButton").click(async function () {
                const $thisButton = $(this);
                const slot = $("#keySlotSelect").val();
                const key = $("#keyInput").val();

                if (key) {
                    localStorage.setItem("key" + slot, key);
                    $thisButton.html(getTranslation("saved", languageIndex));
                    $thisButton.removeClass("bg-dark").addClass("bg-success");
                } else {
                    $thisButton.removeClass("bg-dark").addClass("bg-danger");
                    $thisButton.html(getTranslation("error", languageIndex));
                }

                await new Promise(r => setTimeout(r, 1000));
                $thisButton.removeClass("bg-success bg-danger").addClass("bg-dark");
                $thisButton.html(getTranslation("saveKeyButton", languageIndex));
            });

            // Change language
            $("#languageSelect").change(function () {
                const selectedLang = parseInt($("#languageSelect").val());
                localStorage.setItem("lang", selectedLang);
                languageIndex = selectedLang;
                updateUILanguage();
            });

                // Attach click handlers to menu links
            $('a.nav-link, a.dropdown-item').click(function (e) {
                const href = $(this).attr('href');

                // Only handle internal links with query parameters
                if (href && href.startsWith('?')) {
                    e.preventDefault();
                    const targetSection = getSectionFromURLString(href);
                    transitionToSection(targetSection);
                }
            });
        });
    </script>
</body>

</html>
