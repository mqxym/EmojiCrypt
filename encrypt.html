<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<title>🚀 - to the moon!</title>
</head>

<body class="d-block p-3">
	<ul class="nav nav-pills nav-fill">
		<li class="nav-item">
			<a class="nav-link active bg-dark" id="headerEncrypt" href="encrypt.html">Encrypt 📤</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" href="decrypt.html" id="headerDecrypt">Decrypt 📥</a>
		</li>
	</ul>
	<hr>
	<form class="form">
		Text 📄 ➡️ 🌈 Emoji
		<hr>
		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<span class="input-group-text">✉️</span>
			</div>
			<textarea class="form-control" placeholder="Message" aria-label="Emoji" id="inputText" rows="5"></textarea>
		</div>
		<label for="emcode">
			<div class="text-center" id="encryptExplanation">Encrypt messages with an optional password. Use the generate button when you need a good one.</div>
		</label>
		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<span class="input-group-text" id="emcode">🔑</span>
			</div>
			<input type="text" placeholder="(optional)" class="form-control" id="inputKey" aria-describedby="emcode">
			<div class="input-group-append">
				<button id="btnKeyGenerate" type="button" class="btn btn-primary btn-block bg-dark">Generate</button>
			</div>
			<div class="input-group-append">
				<button id="copyKey" type="button" class="btn btn-primary bg-dark btn-block">Copy</button>
			</div>
		</div>

		<button id="btnEncode" type="button" class="btn btn-primary bg-dark btn-block mb-2">🔀 Encrypt</button>
	</form>
	<hr>
	<div class="input-group mb-3">
		<textarea class="form-control" aria-label="Emoji" id="out" rows="10" readonly>Copy from here</textarea>
		<div class="input-group-append">
			<button id="copyMessage" type="button" class="btn btn-primary btn-block bg-dark">Copy <br>to clipboard</button>
		</div>
	</div>
	<hr>
	<p class="text-center">
		<b id="footerHigh">Secure on device text encryption!</b>
	</p>
	<div class="text-center">
		<a href="https://github.com/mqxym/EmojiCrypt" id="footerSource">Sourcecode (Github)</a>
	</div>


	<!-- 
		Todo:
		- copy button for URL
		- add colors for status message
		- save password as a cookie
		- save language as cookie
		- languages (ger, span, port, rus, japan etc)
	-->
	<script src="js/jquery.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/lib.js"></script>
	<script src="js/emo.js"></script>
	<script src="js/crypto.js"></script>
	<script src="js/lang.js"></script>

	<script>
		let emo ="😃😄😁😆😅😂🤣☺️😊😇🙂🙃😉😌😍😘😗😙😚😋😜😝😛🤑🤗🤓😎🤡🤠😏😒😞😔😟😕🙁☹️😣😖😫😩😤😠😡😶😐😑😯😦😧😮😲😵😳😱😨😰😢😥🤤😭😓😪😴🙄🤔🤥😬🤐🤢🤮🤧😷🤒🤕🤨🤩🤯🧐🤫🤪🤭🥱🥳🥴🥶🥵😈👿🤬👹👺💩👻💀☠️👽👾🤖🎃😺😸😹😻😼😽😿😾🙀🐶🐱🐭🐹🐰🦊🐻🐼🐨🐯🦁🐮🐷🐽🐸🐵🙈🙉🙊🐒🐔🐧🐦🐤🐣🐥🦆🦅🦉🦇🐺🐗🐴🦄🐝🐛🦋🐌🐚🐞🐜🕷🕸🐢🐍🦎🦂🦀🦑🐙🦐🐠🐟🐡🐬🦈🐳🐋🐊🐆🐅🐃🐂🐄🦌🐪🐫🐘🦏🦍🐎🐖🐐🐏🐑🐕🐩🐈🐓🦃🕊🐇🐁🐀🐿🐾🐉🐲🦖🦕🦒🦔🦓🦗🦧🦮🦥🦦🦨🦩🌵🎄🌲🌳🌴🌱🌿☘️🍀🎍🎋🍃🍂🍁🍄🌾💐🌷🌹🥀🌻🌼🌸🌺🌎🌍🌏🌕🌖🌗🌘🌑🌒🌓🌔🌚🌝🌞🌛🌜🌙💫⭐️🌟✨⚡️🔥💥☄️🛸☀️🌤⛅️🌥🌦🌈☁️🌧⛈🌩🌨☃️⛄️❄️🌬💨🌪🌫🌊💧💦☔️🍏🍎🍐🍊🍋🍌🍉🍇🍓🍈🍒🍑🍍🥝🥑🍅🍆🥒🥕🌽🌶🥔🍠🌰🥜🍯🥐🍞🥖🧀🥚🍳🥓🧄🧅🥞🧇🍤🍗🍖🍕🌭🍔🍟🥙🌮🌯🥗🥘🍝🍜🦪🍲🍥🍣🍱🍛🍚🧆🍙🍘🍢🍡🍧🍨🍦🍰🎂🍮🍭🍬🍫🍿🍩🍪🥛🧈🍼☕️🍵🍶🍺🍻🥂🍷🥃🍸🍹🍾🧉🧃🧊🥄🍴🍽⚽️🏀🏈⚾️🎾🏐🏉🎱🏓🏸🥅🏒🏑🏏⛳️🏹🎣🥊🥋⛸🎿⛷🏂🏋️‍♀️🏋️🤺🤼‍♀️🤼‍♂️🤸‍♀️🤸‍♂️⛹️‍♀️⛹️🤾‍♀️🤾‍♂️🏌️‍♀️🏌️🏄‍♀️🏄🏊‍♀️🏊🤽‍♀️🤽‍♂️🚣‍♀️🚣🤿🏇🚴‍♀️🚴🚵‍♀️🚵🎖🥇🥈🥉🏆🏵🎗🎫🎟🎪🤹‍♀️🤹‍♂️🎭🎨🎬🎤🎧🎼🎹🥁🎷🎺🎸🎻🪕🎲🎯🎳🪀🪁🎮🎰🚗🚕🚙🚌🚎🏎🚓🚑🚒🚐🚚🚛🚜🛴🚲🛵🏍🛺🚨🚔🚍🚘🚖🚡🚠🚟🚃🚋🚞🚝🚄🚅🚈🚂🚆🚇🚊🚉🚁🛩✈️🛫🛬🪂💺🛶⛵  🛳⛴🚢⚓️🚧⛽️🚏🚦🚥🗺🗿🗽⛲️🗼🏰🏯🏟🎡🎢🎠⛱🏖🏝⛰🏔🗻🌋🏜🏕⛺️🛤🛣🏗🏭🏠🏡🏘🏚🏢🏬🏣🏤🏥🏦🏨🏪🏫🏩💒🏛⛪️🕌🕍🛕🕋⛩🗾🎑🏞🌅🌄🌠🎇🎆🌇🌆🏙🌃🌌🪐🌉🌁⌚️📱📲💻⌨🖥🖨🖱🖲🕹🗜💽💾💿📀📼📷📸📹🎥📽🎞📞☎📟📠📺📻🎙🎚🎛⏱⏲⏰🕰⌛️⏳📡🔋🔌💡🔦🕯🗑🛢💸💵💴💶💷💰💳💎🧿⚖️🔧🔨⚒🛠⛏🪓🔩⚙️⛓🔫🪁💣🪒🔪🗡⚔️🛡🚬⚰️⚱️🏺🪔🔮📿💈⚗️🔭🔬🕳🦯🩺💊💉🩸🩹🦠🧫🧬🌡🚽🚰🚿🛁🛀🛎🔑🗝🚪🛋🛏🛌🪑🖼🛍🛒🎁🎈🎏🎀🎊🎉🎎🏮🎐✉️📩📨📧💌📥📤📦🏷📪📫📬📭📮📯📜📃📄📑📊📈📉🗒🗓📆📅📇🗃🗳🗄📋📁📂🗂🗞📰📓📔📒📕📗📘📙📚📖🔖🔗📎🖇📐📏📌📍🎌🏳️🏴🏁🏳️‍🌈✂️🖊🖋✒️🖌🖍📝✏️🔍🔎🔏🔐🔒🔓💄👚👕👖👔👗👙👘👠👡👢👞👟👒🎩🎓👑⛑🎒👝👛👜💼👓🕶🌂☂️💛💚💙💜🖤🤎🤍🧡💔❣️💕💞💓💗💖💘💝💟☮️✝️☪️🕉☸️✡️🔯🕎☯️☦️🛐⛎♈️♉️♊️♋️♌️♍️♎️♏️♐️♑️♒️♓️🆔⚛️🈳🉑☢️☣️📴📳🈶🈚️🈸🈺🈷️✴️🆚🉐㊙️㊗️🈴🈵🈹🈲🅰️🅱️🆎🆑🅾️🆘🚼❌⭕️🛑⛔️📛🚫💯💮💢♨️🚷🚯🚳🚱🔞📵🚭❗️❕❓❔‼️⁉️🔅🔆〽️⚠️🚸🔱⚜️🔰♻️✅🈯️💹❇️✳️❎🌐💠Ⓜ️🌀💤🏧🚾♿️🅿️🈂️🛂🛃🛄🛅🚹🚺🚻🚮➿🎦📶🈁🔣ℹ️🔤🔡🔠🆖🆙🆒🆕🆓▶️⏸⏯⏹⏺⏭⏮⏩⏪⏫⏬◀️🔼🔽➡️⬅️⬆️⬇️↗️↘️↙️↖️↪️↩️⤴️⤵️🔀🔁🔂🔄🔃🔚🔙🔛🔝🔜☑️↕️↔️🎵🎶➕➖➗✖️💲💱™️©️®️〰️➰✔️🔘⚫️⚪️🔴🔵🟣​🟠🟢🟣🔺🔻🔸🔹🔶🔷🔳🔲▪️▫️◾️◽️◼️◻️⬛️⬜️🟧🟩🟦🔈🔇🔉🔊🔔🔕📣📢👁‍🗨💬💭🗯♠️♣️♥️♦️🃏🎴🀄️🕐🕑🕒🕓🕔🕕🕖🕗🕘🕙🕚🕛🕜🕝🕞🕡🕢🕣🕤🕥🕦🕧"
		let lang = 1;

		function setLanguage () {
			$("#footerHigh").html(getFooterHigh(lang));
			$("#footerSource").html(getFooterSource(lang));
			$("#headerEncrypt").html(getHeaderEncrypt(lang));
			$("#headerDecrypt").html(getHeaderDecrypt(lang));

			$("#encryptExplanation").html(getEncryptExplanation(lang));
			$("#btnEncode").html(getBtnEncode(lang));
			$("#btnKeyGenerate").html(getBtnKeyGenerate(lang));
			$("#copyKey").html(getCopyKey(lang));
			$("#copyMessage").html(getCopyMessage(lang));
			$("#out").html(getOut(lang));
			
		}

		$(document).ready(function () {

			setLanguage();
			console.log("Language Packet Loaded.");

			emo_array = stringToArray(emo);
			emo_array = cleanArray(emo_array);

			if (isDebug()) {
				$("#inputText").val("------BEGIN PGP MESSAGE-----hQEMA1ZI4rklQD/fAQf9FsiggrmHJlqvIAeDusZWtHfWcj8ikh9xOlXVBdHmoRxEejzdBY/92puUzOD49muGVTFZ5oPZwIl9N2vPouS3wVhnl9vSdo4ssyIGVFaYhJNUQ2ZN9/5mKWfKRW+DGDwmAcS52lICzHzQI8qOozUBX/c17ll+xIVZzSLlDaX81d2136tTbUHnqWfT4V+RP1fqntyNkKWHX7/A3yB003wtrDV+Tr4Pv0IjTVm3T9IJbD0RNdqS0xsLBroy+4dHJOF2FXRcGa1eLSx2L6DYNO8VTqE5wOdCYWRFyF2HiT842tJCMEHjTtIxqGIQwQqVCcbzDuyzo6wgy/4XAQJG2z9fBNLAvQH5MtfJuEzDtqqSLnDcKWHS3nKN5MwJA/eBW8EgoJcIrjytzEPKmcqMj3xpxhM9ajEzyxnIZr/gCB/h8+bcI0ivkLxsmuPqZmbhX2HT1zxygpSG8MHEGK0SP3m+PdvSaHaP4DriqfUXb9r5f5/j2NIyxqxwLziwUIqFFHPTQoOc2fUPYdaOCTY295FTMvYs6CzjoVY355MrRrWNIFZnJ6LPMlpOPyNk5WdnzeJvmW99JUIT33TbpH7m/24Wxkll+PjkXff75KNzzJ+rqkfk/Hpuxaj1tDWorV9m7OqNEhc3F+BgzeB1+M7Ko3lwONmpsqJ7Kw/H2LJRd+YdGl4+RWOFmYHYSgdJay7twhSlOYRn7+fmKVzxwvUn/hWRs8QN/PDmcYmrJS9oOUa9BJ6sDpBfEzFkga4DHxg0ZxYaFTaZ6ppawwUpTQ7O0zzQQn/d1iNmdD23DeneoHQWBaKFssypJ/unzbWVZtP7Wr4RuQxhIMUDh3bcKplMjrb2OA===xehw-----END PGP MESSAGE-----");
				$("#inputKey").val("⛓🥊🔴😮🍠🍜🚝🎃🌌🐕😡🌮💎🏓➖🎟🐘🦉😵🛋👛🥱✉👽🥇📎📛😺😣🤾🔐🎢↖😤🌐🏆🌇👒🐙⚱🍝🔓👓😃🔂🌆😰🏚🏴➕💀🐪🧐📝🍽⏮🌧🍸⏹😇🐫🦏🪑⛏")
			}


			$("#btnEncode").click(async function () {
				$(this).html(getBtnEncodeWorking(lang));
				console.log("Started Calculating Password Hash.")
				await new Promise(r => setTimeout(r, 15));

				let message = $("#inputText").val();
				let key = getPassword($("#inputKey").val());
				
				let emojiString = em_encrypt(message,key);

				$("#out").val(emojiString);
				$(this).html(getBtnEncodeFinished(lang));
			});

			$("#btnKeyGenerate").click(function () {
				$("#inputKey").val(generateRandomEmo(emo_array));
			});

			$("#copyKey").click(function () {
				let copyText = document.getElementById("inputKey");
				copyText.select();
				copyText.setSelectionRange(0, 99999);
				document.execCommand("copy");
			});

			$("#copyMessage").click(function () {
				let copyText = document.getElementById("out");
				copyText.select();
				copyText.setSelectionRange(0, 99999);
				document.execCommand("copy");
			});


		});
	</script>
</body>

</html>